# <span style="color: #5c8aff">Простой мессенджер для обмена сообщениями в реальном времени</span>

## <span style="color: #7230ff">Описание проекта</span>
  В приложении можно регистрироваться и создавать чат с другим пользователем (групповые чаты не предусмотрены).
На странице отображаются все зарегистрированные пользователи, чат можно начать с любым из них. Между чатами можно переключаться. 
Также доступен чат с самим собой "Избранное". У пользователя есть возможность привязать свой аккаунт к телеграм-боту. 
Если пользователь, которому отправили сообщение не залогинен в системе на момент отправки сообщения, то бот пришлет 
уведомление о полученном сообщении.

### 1. Что реализовано?
- контейнеризация с использованием ***Docker и Docker-compose***
- простая конфигурация nginx
- описаны модели БД с использованием ***SQLAlchemy ORM***
- миграция БД с использованием ***alembic***
- валидация данных с использованием ***Pydantic***
- система аутентификации с использованием ***FastAPI Users***. Авторизация реализована через JWT-токен, передаваемый в cookies
- пагинация и сортировка для получения списка пользователей
- пагинация при получении истории сообщений
- обмен сообщениями в реальном времени при помощи ***Websockets***
- кеширование истории сообщений (для каждого отдельного пользователя) и списка пользователей в ***Redis***. Список пользователей в кеше обновляется при регистрации нового пользователя,
а история сообщений храниться 30 минут (таймер обновляется при отправке нового сообщения).
- простой телеграм-бот: @test_messanger_notification_bot. Его возможности:
  + связать свой аккаунт в приложении с аккаунтом телеграм, отправив боту email, использованный при регистрации в приложении
  + отправить уведомление о новом сообщении
- обработка запроса на отправку уведомления в телеграм с помощью ***Celery***
- Просто веб интерфейс с использованием шаблонов ***Jinja*** (страница для регистрации / авторизации и главная страница
со списокм всех пользователей и чатом)

## <span style="color: #f00">Как запустить?</span>
 Для запуска приложения достаточно запустить docker-compose следующей командой:
```
    docker-compose up --build --force-recreate -d
```
После этого приложение будет доступно по адресу http://localhost/

#### При сборке контейнера также в базу будет сразу добавлен пользователь с правами администратора. Его логин: "root@gmail.com", пароль: "root" 
## <span style="color: #00ff1a">Документация и тестирование API</span>

- Документация к API доступна по адресу: http://localhost/docs (автоматически сгенерированная)


## <span style="color: #fbff00">Используемый стек</span>
- Python 3.10
- PostgreSQL 16
- SQLAlchemy 2.0
- FastAPI
- FastAPI Users
- Alembic
- Redis
- Websockets
- Aiogram
- Celery
- Docker и Docker-compose
- Nginx
- Локальная ОС:
    + Windows 10
- Образ ОС в docker-контейнере:
    + python:3.10-alpine


